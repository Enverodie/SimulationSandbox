<html>
    <head>
        <title>SimulationSandbox</title>
        <link rel="icon" href="favicon.png">
        <script src="cssColors.js" defer></script>
        <script src="square.js" defer></script>
        <script src="grid.js" defer></script>
        <script src="gamelogic.js" defer></script>
        <script src="sampleOtherLife.js" defer></script>
        <script src="render.js" defer></script>
        <script src="controls.js" defer></script>
        <script src="index.js" defer></script>
        <!-- <script src="test.js" defer></script> -->
        <style>
            :root {
                --mainWidth: 0%;
                --bgColor: hsl(260deg, 84%, 11%);
                --hamburgerHideControlsMargin: .6rem;
                --txtColor: hsl(230deg, 40%, 86%);
                --standardTransition: cubic-bezier(0.25, 0.46, 0.45, 0.94);
            }

            body {
                background-color: var(--bgColor);
                margin: 0;
                display: flex;
                width: 100vw;
                font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
                overflow-x: hidden;
            }

            #canvasContainer {
                width: calc(100% - var(--mainWidth));
                height: 100vh;
                margin: 0;
                padding: 0;
                border: 0;
                position: relative;
                /* overflow-x: hidden; */
                z-index: 5;
            }

            #squareInfo {
                position: absolute;
                background-color: var(--bgColor);
                padding: .4rem;
                padding-right: 1rem;
                border-radius: .6rem;
                color: var(--txtColor);
                
                -moz-user-select: -moz-none;
                -khtml-user-select: none;
                -webkit-user-select: none;
                -o-user-select: none;
                user-select: none;

                --timeTaken: .1s;
                transition: opacity var(--standardTransition) var(--timeTaken), visibility var(--standardTransition) var(--timeTaken);
            }

            canvas.canGrab {
                cursor: grab;
            }

            canvas.isGrabbing {
                cursor: grabbing;
            }

            canvas.canPlace {
                cursor: copy;
            }

            main {
                width: var(--mainWidth);
                background-color: var(--bgColor);
                color: var(--txtColor);
            }
            
            main .border {
                border-left: solid .5vw hsl(260deg, 84%, 20%);
                box-sizing: border-box;
                min-height: 100vh;
            }
            
            .mainContent {
                padding: 1rem;
                display: flex;
                flex-direction: column;
                align-items: initial;
                white-space: nowrap;
            }
            
            main nav {
                background-color: hsl(260deg, 84%, 40%);
                width: 100%;
                padding: .4rem;
            }

            main, #canvasContainer {
                transition: width var(--standardTransition) .3s;
            }

            main.dragging, #canvasContainer.dragging {
                transition: width 0s linear;
            }

            .hideMain {
                position: absolute;
                top: 0;
                right: 0;
                padding: .3rem;
                margin: var(--hamburgerHideControlsMargin);
                margin-right: calc(1.5 * var(--hamburgerHideControlsMargin));
            }

            #dragMainBox {
                position: absolute;
                top: 0;
                right: calc(0rem - var(--hamburgerHideControlsMargin));
                /* background-color: red; */
                box-sizing: border-box;
                border: none;
                width: calc(2 * var(--hamburgerHideControlsMargin));
                height: inherit;
                cursor: e-resize;

                transition: border var(--standardTransition) .1s;
            }
            
            #dragMainBox:hover {
                border-right: 1px solid cyan;
                border-left: 1px solid cyan;
            }

            .controls {
                background-color: hsl(260deg, 84%, 30%);
                padding: 1rem 4rem 1rem .8rem;
                margin: 1rem 0;
                overflow-x: hidden;
            }

            .controls * {
                display: block;
            }
            
            .listChoice {
                overflow-x: auto; /* Gives a horizontal scrollbar but only when necessary */
                white-space: nowrap;
            }
            
            .listChoice * {
                display: inline-block;
            }
            
            .listChoice button {
                border: none;
                background-color: hsl(260deg, 84%, 40%);
                cursor: pointer;
                color: var(--txtColor);
                padding: .8em;
                margin: .3em;
            }
            
            .listChoice button.active {
                background-color: hsl(260deg, 84%, 20%);
                cursor: not-allowed;

            }

            .listChoice button:not(.active):hover {
                background-color: hsl(260deg, 84%, 50%);                
            }
            
            .listChoice button:not(.active):active {
                background-color: hsl(260deg, 95%, 30%);                
            }
            
            .listChoice button:first-child {
                margin-left: 0;
            }
            
            .listChoice button:last-child {
                margin-right: 0;
            }

        </style>
    </head>
    <body>
        <div id="canvasContainer">
            <canvas id="canvas"></canvas>
            <div id="dragMainBox"></div>
            <button class="hideMain" onclick="toggleMainView()"><img src="https://upload.wikimedia.org/wikipedia/commons/b/b2/Hamburger_icon.svg"></button>
        </div>
        <main>
            <div class="border">
                <nav aria-label="secondary navigation">
                    NAVIGATION
                </nav>
                <div class="mainContent">
                    <h1>SimulationSandbox</h1>
                    <div class="controls">
                        <label>Place color:
                            <input id="currentPlaceColor" type="color" value="#fff000" onchange="{as.placeColor = this.value}">
                        </label>
                    </div>
                    <div class="controls">
                        <label>Select lifeform:</label>
                            <div id="lifeformChoice" class="listChoice">
                                <button onclick="setActiveLifeform(this)" class="active">conway</button>
                            </div>
                            <!-- <input id="currentPlaceColor" type="color" value="#fff000" onchange="{as.placeColor = this.value}"> -->
                    </div>
                </div>
            </div>
        </main>
    </body>
</html>